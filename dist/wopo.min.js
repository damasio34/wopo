var CryptoJS=CryptoJS||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;t>i;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;t>i;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;e>r;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++){var i=e[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},f=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var u=0;e>u;u+=o)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=l.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}});var h=n.algo={};return n}(Math);!function(){var t=CryptoJS,e=t.lib,n=e.WordArray,r=e.Hasher,i=[],e=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=0;80>c;c++){if(16>c)i[c]=0|t[e+c];else{var f=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=f<<1|f>>>31}f=(r<<5|r>>>27)+u+i[c],f=20>c?f+((o&s|~o&a)+1518500249):40>c?f+((o^s^a)+1859775393):60>c?f+((o&s|o&a|s&a)-1894007588):f+((o^s^a)-899497514),u=a,a=s,s=o<<30|o>>>2,o=r,r=f}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(r+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=r._createHelper(e),t.HmacSHA1=r._createHmacHelper(e)}(),function(t){"use strict";t.module("wopo.services",[]);var e=t.module("wopo",["wopo.services"]);e.provider("$wopo",function(){var t,e,n=!0;this.setAppId=function(e){t=e},this.setRestApiKey=function(t){e=t},this.setUsuarioPrecisaEstarAutenticado=function(t){n=t},this.$get=function(){return t||console.error("A configuração APP_ID não foi definida"),e||console.error("A configuração REST_API_KEY não foi definida"),{APP_ID:t,REST_API_KEY:e,UsuarioPrecisaEstarAutenticado:n}}})}(angular),function(t,e){e||console.error("É necessário importar a biblioteca cryptojs.js");var n=t.module("wopo.services");n.factory("CryptSha1Service",function(){var t=function(){this.hash=function(t){var n=JSON.stringify(t);return e.SHA1(n).toString()}};return new t})}(angular,CryptoJS),function(t){var e=t.module("wopo.services");e.factory("IonicPopupService",function(t,e){var n=function(){this.alert=function(n,r,i){var o=t.alert({title:n,template:r});e(function(){o.close()},i)},this.confirm=function(e,n,r,i){var o=t.confirm({title:e,template:n});o.then(function(t){t?r():i()})}};return new n})}(angular),function(t){var e=t.module("wopo.services");e.factory("WebStorageService",function(){var t=function(){this.setLocalStorage=function(t,e){e&&(localStorage[t]=JSON.stringify(e))},this.getLocalStorage=function(t){return localStorage[t]?JSON.parse(localStorage[t]):null},this.setSessionStorage=function(t,e){e&&(sessionStorage[t]=JSON.stringify(e))},this.getSessionStorage=function(t){return sessionStorage[t]?JSON.parse(sessionStorage[t]):null}};return new t})}(angular),function(t){var e=t.module("wopo.services");e.service("FormHelperService",function(e,n,r){var i=this,o=function(t){i.defaultRoute=t},s=function(t){return t.enabledValidations=!t.enabledValidations,t.enabledValidations},a=function(t,n,o){return n.incluir(t).success(function(t){r.alert("Sucesso","Dados cadastrados com sucess!",3e3),e.path(i.defaultRoute)},function(t){throw t})},u=function(e,n,r){return n.editar(e).success(function(n){r.OriginalModel=t.copy(e)},function(t){throw t})},c=function(t){if(!t.formulario)throw"Objeto Formulário não definido";return t.formulario.$valid},f=function(t){return t.formularioEhValido()&&t.usuarioAlterouFormulario()},l=function(t,e){if(t.formulario=e,t.formularioEhValido()){if(t.modoEdicao){if(!t.usuarioAlterouFormulario())return;return t.salvarAlteracao()}return t.salvarInclusao()}},h=function(e){return!t.equals(e.Model,e.OriginalModel)},d=function(e){return t.copy(e.OriginalModel,e.Model),e.Formulario.$setPristine()},p=function(t){return null===t||void 0===t},g=function(t,e,n){e.modoEdicao=!0;var r=function(t,e,n,r,i){n.getById(t).success(function(t){var n=!!t;n&&e.edit(t),r(t,t,n)},function(t){throw t})};return new Promise(function(i,o){e.$config?configuracoesService.getByKey(e.$config).then(function(s){e.$config=s,r(t,e,n,i,o)}):r(t,e,n,i,o)})},m=function(e,n){n.modoEdicao=!0,n.Model=e,n.OriginalModel=t.copy(e)},v=function(e,n){var r=e||{};n.Model=r,n.OriginalModel=t.copy(r),n.carregado=!0},y=function(t){t.usuarioAlterouFormulario()?r.confirm("Alteração não salvas","Deseja sair sem salvar as alterações?",function(){e.path(i.defaultRoute)}):e.path(i.defaultRoute)};this.applySettings=function(t,e,n){if(!e)throw"Variável '$scope' precisa ser definda";e.enabledValidations=!0,e.salvarInclusao=function(){return a(e.Model,n,e)},e.salvarAlteracao=function(){return u(e.Model,n,e)},e.formularioEhValido=function(){return c(e)},e.canSubmit=function(){return f(e)},e.submitForm=function(t){return l(e,t)},e.usuarioAlterouFormulario=function(){return h(e)},e.desfazerAlteracoesDoUsuario=function(){return d(e)},e.sair=function(){return y(e)},e.edit=function(t){return m(t,e)},t.editById=function(t){return g(t,e,n)},t.novoRegistro=function(t){return v(t,e,n)},t.isNullOrUndefined=function(t){return p(t)},t.setDefaultRoute=function(t){return o(t)},e.habilitarOuDesabilitarValidacao=function(){return s(e)},e.ExcluirModal=function(t,r){return _excluirModal(t,r,e,n)},t.confirmar=function(t,n){return _confirmar(e,t,n)}}})}(angular),function(t){var e=t.module("wopo.services");e.service("ListHelperService",function(){var t=function(t,e){return t.getAll().success(function(t){e.itens=t.results},function(t){throw t})},e=function(e,n){t(e,n).success(function(){n.$broadcast("scroll.refreshComplete")},function(t){throw t})},n=function(t,e,n){return t.excluir(n.objectId).success(function(t){e.itens.splice(e.itens.indexOf(n),1)},function(t){throw t})};this.applySettings=function(r,i,o){if(!i)throw"Variável '$scope' precisa ser definda";if(!i)throw"Variável '$modelService' precisa ser definda";i.queryBuscar&&(i.limparBuscar=function(){i.queryBuscar=""}),r.listarItens=function(){return t(o,i)},i.atualizarItens=function(){return e(o,i)},i.excluirItem=function(t){return n(o,i,t)}}})}(angular),function(t){var e=t.module("wopo.services");e.factory("RestServiceBase",["$http","$wopo","WebStorageService",function(t,e,n){var r=function(){self=this,this.mainRoute=void 0,this.urlBase="https://api.parse.com/1/classes/",this.getToken=function(){var t=n.getLocalStorage("_$token")||n.getSessionStorage("_$token");if(t)return t;throw"Usuário não autenticado, efetue login"},this.headers={"X-Parse-Application-Id":e.APP_ID,"X-Parse-REST-API-Key":e.REST_API_KEY},e.UsuarioPrecisaEstarAutenticado&&(self.headers["X-Parse-Session-Token"]=this.getToken()),this.setMainRoute=function(t){self.mainRoute=t},this.getAll=function(){if(!self.mainRoute)throw"mainRoute não configurada.";return t.get(self.urlBase+self.mainRoute,{headers:self.headers})},this.getById=function(e){if(!e)throw"id não informado";if(!this.mainRoute)throw"mainRoute não configurada.";return t.get(self.urlBase+self.mainRoute+"/"+e,{headers:self.headers})},this.incluir=function(e){if(!self.mainRoute)throw"mainRoute não configurada.";return t.post(self.urlBase+self.mainRoute,e,{headers:self.headers})},this.editar=function(e){if(!this.mainRoute)throw"mainRoute não configurada.";return t.put(self.urlBase+self.mainRoute+"/"+e.objectId,e,{headers:self.headers})},this.excluir=function(e){if(!this.mainRoute)throw"mainRoute não configurada.";return t["delete"](self.urlBase+self.mainRoute+"/"+e,{headers:self.headers})}};return r}])}(angular);